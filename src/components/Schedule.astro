---
import Event from "./Event.astro";

interface Props {
  title: string;
  events: any;
}
const { title, events } = Astro.props;

const earliest_hour = events
  .reduce((acc: any, event: any) => {
    const start = new Date(event.properties["Fecha"].date.start);
    return start < acc ? start : acc;
  }, new Date())
  .getHours();
const latest_hour = events
  .reduce((acc: any, event: any) => {
    const end = new Date(event.properties["Fecha"].date.end);
    return end > acc ? end : acc;
  }, new Date())
  .getHours();
---

<div class="flex flex-col gap-6 w-full max-w-3xl mx-auto">
  <h1>{title}</h1>
  {
    events.map((event: any) => (
      <Event
        title={event.properties.Name.title[0].plain_text}
        date={{
          start: event.properties["Fecha"].date.start,
          end: event.properties["Fecha"].date.end,
        }}
        location={event.properties.Location.rich_text?.[0]?.plain_text}
        description={
          event.properties["DescripciÃ³n pÃºblica"]?.rich_text?.[0]?.plain_text
        }
        speakers={event.properties.Speakers?.multi_select?.map(
          (speaker: any) => speaker.name,
        )}
      />
    ))
  }
</div>
